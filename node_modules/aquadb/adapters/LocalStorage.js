"use strict";
/* global localStorage */

const { baseSet, baseGet, baseDelete } = require("../Util");

class LocalStorage {
    constructor(name) {
        this.name = name || "database";
    }

    set(key, value) {
        let data = this.all();
        data = baseSet(data, key, value);
        localStorage.setItem(this.name, JSON.stringify(data));
        return baseGet(data, key);
    }

    get(key) {
        let data = this.all();
        return baseGet(data, key);
    }

    delete(key) {
        let data = this.all();
        data = baseDelete(data, key);
        localStorage.setItem(this.name, JSON.stringify(data));
        return true;
    }

    all() {
        return JSON.parse(localStorage.getItem(this.name) || "{}");
    }

    deleteAll() {
        localStorage.clear();
        return true;
    }
}

module.exports = LocalStorage;